<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>æ›¼æ›¼ç”Ÿæ—¥å¿«ä¹</title>
    <link rel="icon" href="./images/favicon.ico">
    <link href="./css/style.css" type="text/css" rel="stylesheet">
    <script src="./js/jquery.js"></script>
    <script src="./js/garden.js"></script>
    <script src="./js/functions.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
</head>

<body>
<br/><br/>
<div id="mainDiv">
    <div id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div id="code">

                        <span class="comments">æœ€æœ€äº²çˆ±çš„æ›¼æ›¼ï¼š</span><br/>
                        <span class="comments">åœ¨ä½ <s>çœŸæ­£çš„</s>ç”Ÿæ—¥åˆ°æ¥ä¹‹é™…ï¼Œ</span><br/>
                        <span class="comments">æˆ‘å°†æˆ‘é‚£å¦‚å¤§æµ·èˆ¬æ·±æ²‰çš„å£°éŸ³åŒ–ä½œæ­Œå£°ï¼Œä½œä¸ºç¤¼ç‰©é€ç»™ä½ ğŸ˜‰</span><br/><br/>
                        <span class="comments">ä¸çŸ¥ä¸è§‰ä¸‰ä¸ªæœˆè¿‡å»äº†ï¼Œ</span><br/>
                        <span class="comments">æœ€åˆä¸äº†è§£ä½ ä¹Ÿä¸çŸ¥é“è¯¥å’Œä½ è¯´ä»€ä¹ˆï¼Œå·®ç‚¹å°±æ²¡èŠä¸‹å»</span><br/>
                        <span class="comments">è€Œç°åœ¨ä½ å·²ç»æ˜¯æˆ‘ç”Ÿå‘½ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†äº†</span><br/>
                        <span class="comments">å¾ˆå¹¸è¿èƒ½é‡ä¸Šä½ è¿™ä¹ˆç¾å¥½çš„å¥³å­©</span><br/>
                        <span class="comments">æ„Ÿè°¢ä½ å¸¦ç»™æˆ‘çš„æ¬¢ä¹ï¼Œä¹Ÿå¸Œæœ›ä½ æ¥ä¸‹æ¥çš„ä¸€å¹´èƒ½å¼€å¿ƒ~</span><br/>
                        <span class="comments">åæ­£æœ‰ä½ åœ¨æˆ‘æ¥ä¸‹æ¥çš„ä¸€å¹´è‚¯å®šä¼šå¼€å¿ƒäº†ğŸ˜Š</span><br/><br/>
                        <span class="comments">ç¥ä½ èº«ä½“å¥åº·å­¦ä¸šé¡ºåˆ©ï¼Œä¸€å†™è®ºæ–‡å°±æœ‰çµæ„Ÿï¼Œ</span><br/>
                        <span class="comments">èƒ½å¿«å¿«ä¹ä¹åœ°è¿‡å¥½æ¯ä¸€å¤©ï¼</span><br/>
                        <br>
                        <span class="comments"><b class="bb">Your ãŠå…„ã¡ã‚ƒã‚“ ğŸ˜˜</b></span>
                    </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <div id="loveHeart">
                        <canvas id="garden"></canvas>
                        <div id="words">
                            <div id="messages">
                                <img src="./images/zsr.png">
                            </div>
                            <div id="loveu">
                                <img src="./images/sr.png">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="copyright">
        <center>
            <link rel="stylesheet" href="./css/cuplayer.css">
            <div style="position:absolute; top:50px; right:50px;">
                <audio id="main_audio" preload="auto">
                    <source src="./mp3/birthday.mp3" type="audio/mpeg"/>
                    <embed id="main_audio_ie8" hidden="true" autostart="true" height="0" width=0
                           src="./mp3/birthday.mp3" autoplay="autoplay"/>
                </audio>
                <a class="c-white fs-12 icon-play rotate" id="btn-play" href="javascript:void(0);"></a>
            </div>
            <script type="text/javascript">
                var audio = document.getElementById("main_audio");
                audio.addEventListener("ended", function(){
                     audio.currentTime = 0;
                     $('#btn-play').click();
                });
                window.onload = function(){ $('#btn-play').click();$('#btn-play').click(); }
                $(function () {
                    var isPlaying = function (audio) {
                        return !audio.paused;
                    }
                    var a = document.getElementById('main_audio');
                    if (!(a.play instanceof Function)) {
                        a = document.getElementById('main_audio_ie8');
                        isPlaying = function (audio) {
                            return audio.playState == 2;
                        }
                    }
                    $('#btn-play').click(function () {
                        if ($(this).hasClass('rotate')) {
                            a.pause();
                            $(this).removeClass('rotate');
                        } else {
                            a.play();
                            $(this).addClass('rotate');
                        }
                    });

                });
                (function() {
                    function log(info) {
                        console.log(info);
                        // alert(info);
                    }
                    function forceSafariPlayAudio() {
                        audioEl.load(); // iOS 9   è¿˜éœ€è¦é¢å¤–çš„ load ä¸€ä¸‹, å¦åˆ™ç›´æ¥ play æ— æ•ˆ
                        audioEl.play(); // iOS 7/8 ä»…éœ€è¦ play ä¸€ä¸‹
                    }
                    var audioEl = document.getElementById('bgmusic');
                    // å¯ä»¥è‡ªåŠ¨æ’­æ”¾æ—¶æ­£ç¡®çš„äº‹ä»¶é¡ºåºæ˜¯
                    // loadstart
                    // loadedmetadata
                    // loadeddata
                    // canplay
                    // play
                    // playing
                    //
                    // ä¸èƒ½è‡ªåŠ¨æ’­æ”¾æ—¶è§¦å‘çš„äº‹ä»¶æ˜¯
                    // iPhone5  iOS 7.0.6 loadstart
                    // iPhone6s iOS 9.1   loadstart -> loadedmetadata -> loadeddata -> canplay
                    audioEl.addEventListener('loadstart', function() {
                        log('loadstart');
                    }, false);
                    audioEl.addEventListener('loadeddata', function() {
                        log('loadeddata');
                    }, false);
                    audioEl.addEventListener('loadedmetadata', function() {
                        log('loadedmetadata');
                    }, false);
                    audioEl.addEventListener('canplay', function() {
                        log('canplay');
                    }, false);
                    audioEl.addEventListener('play', function() {
                        log('play');
                        // å½“ audio èƒ½å¤Ÿæ’­æ”¾å, ç§»é™¤è¿™ä¸ªäº‹ä»¶
                        window.removeEventListener('touchstart', forceSafariPlayAudio, false);
                    }, false);
                    audioEl.addEventListener('playing', function() {
                        log('playing');
                    }, false);
                    audioEl.addEventListener('pause', function() {
                        log('pause');
                    }, false);
                    // ç”±äº iOS Safari é™åˆ¶ä¸å…è®¸ audio autoplay, å¿…é¡»ç”¨æˆ·ä¸»åŠ¨äº¤äº’(ä¾‹å¦‚ click)åæ‰èƒ½æ’­æ”¾ audio,
                    // å› æ­¤æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç”¨æˆ·äº¤äº’äº‹ä»¶æ¥ä¸»åŠ¨ play ä¸€ä¸‹ audio.
                    window.addEventListener('touchstart', forceSafariPlayAudio, false);
                    audioEl.src = 'http://www.w3school.com.cn/i/song.mp3';
                })();
            </script>

        </center>
    </div>
</div>
<script type="text/javascript">
    var offsetX = $("#loveHeart").width() / 2;
    var offsetY = $("#loveHeart").height() / 2 - 50;
    var together = new Date();
    together.setHours(8);
    together.setMinutes(0);
    together.setSeconds(0);
    together.setMilliseconds(0);

    if (!document.createElement('canvas').getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML = "æ‚¨çš„æµè§ˆå™¨å·²ç»è¿‡æ—¶!è¯·ä½¿ç”¨éIEæµè§ˆå™¨è¿›è¡Œé¢„è§ˆ";
        document.body.appendChild(msg);
        $("#code").css("display", "none")
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
    } else {
        setTimeout(function () {
            startHeartAnimation();
        }, 6000);

        timeElapse(together);
        setInterval(function () {
            timeElapse(together);
        }, 500);

        adjustCodePosition();
        $("#code").typewriter();
    }
</script>
</div>


</body>
</html>
